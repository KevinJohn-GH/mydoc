# 6.6 函数匹配

确定某次调用使用哪个重载函数。

####确定候选函数和可行函数

函数匹配的第一步：选定本次调用对应的重载函数集，集合中到的函数称为**候选函数（candidate function）**。

候选函数具备两个特征：

- 与被调用函数同名
- 其声明在调用点可见

函数匹配第二步：从候选函数中选出能被这组实参调用的函数，称为**可行函数（viable function）**。

可选函数两个特征：

- 其形参数量与本次调用提供的实参数量相等
- 每个实参的类型与对应的形参类型相同，或者能转化成形参的类型

#### 寻找最佳匹配（如果有的话）

满足最佳匹配的条件：

- 该函数每个实参的匹配都不劣于其他可行函数需要的匹配
- 至少有一个实参的匹配优于其他可行函数提供的匹配。

如果检查了所有实参之后没有一个函数脱颖而出，则该调用是错误的。编译器将报告二义性错误。



## 6.6.1 实参类型转换

为确定最佳匹配，实参类型到形参类型转换的优先等级排序：

1. 精确匹配，包含以下情况：
   - 实参类型和形参类型相同
   - 实参从数组类型爱过或函数类型转换成对应的指针类型
   - 想实参添加顶层const或者从实参中删除const
2. 通过const转换实现的匹配
3. 通过类型提升实现的匹配
4. 通过算术类型转换实现的匹配
5. 通过类类型转换实现的匹配

注意：顶层指针会被忽略。

#### 需要类型提升和算术 类型转换的匹配

小整型一般会提升到int类型或更大的整数类型。即使是很小的一个整数字面值，也会调用形参为int的函数而不是形参为short的函数。

