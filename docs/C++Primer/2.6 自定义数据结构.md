#2.6 自定义数据结构

从最基本的层面理解，数据结构是把一组相关的数据元素组织起来然后使用它们的策略和方法。



##2.6.1 定义Sales_data类型

```c++
struct Sales_data{
  std::string bookNo;
  unsigned units_sold = 0;
  double revenue = 0.0;
}
```

自定义类以关键字**struct**开始，紧跟着类名和类体（其中类体部分可以为空）。类体由花括号包围形成了一个新的作用域。类内部定义的名字必须唯一，但是可以与类外部的名字重复。

类体右侧表示结束的花括号后必须加一个分号，这是因为类体后面可以紧跟变量名以表示对该类型对象的定义，所以分号必不可少：

```c++
struct Sales_data{/*...*/}accum, trans, *salesptr;
//等价于
struct Sales_data{/*...*/};
Sales_data accum, trans, *salesptr;
//建议使用下面这种
```

- 点运算符( . )的左边操作数是一个结果为结构的表达式；
- 箭头运算符( -> )的左边的操作数是一个指向结构体的指针。 

## 2.6.3 编写自己的头文件

未来确保各个文件中类的定义一致，类通常被定义在头文件中，而且类所在的头文件的名字应与类的名字一样。

注意：头文件一旦改变，相关的源文件必须重新编译以获取更新过的声明。

#### 预处理器概述

确保头文件多次包含仍能安全工作的常用技术是**预处理器（preprocessor）**，它能部分的改变我们的程序。

**头文件保护符（head guard）**

- `#define`指令把一个名字设定成预处理变量
- `#ifdef`当且仅当变量已定义时为真
- `#ifndef`当且仅当变量未定义时为真

一旦检查结果为真，则 执行后续操作直至遇到`#endif`指令为止

使用这些功能就能有效地防止重复包含的发生：

```c++
#ifndef SALES_DATA_H
#define SALES_DATA_H
#include <string>
struct Ssles_data{
  std::string bookNo;
  ...
}
#endif
```

注意：

- 整个程序中的预处理变量包括头文件保护符必须唯一，通常是基于头文件中的类的名字来构建，一般将预处理变量的名字全部大写。


- 预处理变量无视C++语言中关于作用域的规则。
- 头文件保护符只需习惯性地加上就行了，无需在意你的程序到底需不需要。