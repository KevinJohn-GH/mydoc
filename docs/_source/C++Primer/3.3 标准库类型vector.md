# 3.3 标准库类型vector

标准库类型**vector**表示对象的集合，其中所有对象的类型都相同。其中每个对象都有一个与之对应的索引，用于访问对象。因为vector“容纳着”其它对象，所以它也常常被称作**容器（container）**。

C++语言既有**类模版（class template）**， 也有函数模版，其中vector是一个类模板。

编译器根据模版创建类或函数的过程成为**实例化（instantiation）**。

> vector是模版而非类型，由vector生成的类型必须包含vector中元素的类型，如`vector<int>`

vector能容纳绝大多数类型的对象作为其元素，但是引用不是对象，所以不存在包含引用的vector。

> 某些编译器可能仍需以老式的声明语句来处理元素为vector的vector对象，如`vector<vector<int> >`



## 3.3.1 定义和初始化vector对象

| 初始化方法                    | 描述                                 |
| ------------------------ | ---------------------------------- |
| vector<T> v1             | v1是一个空vector，它潜在的元素是T类型的，执行爱过默认初始化 |
| vector<T> v2(v1)         | v2中包含有v1所有元素的副本                    |
| vector<T> v2 = v1        | 等价于v2(v1)                          |
| vector<T> v3(n, val)     | v3包含了n个重复的元素，每个元素的值都是val           |
| vector<T> v4(n)          | v4包含了n个重复的执行了值初始化的对象               |
| vector<T> v5{a, b, c...} | v5包含了初始值个数的元素，每个元素被赋予相应的初始值        |
| vector<T> v5={a,b,c...}  | 等价于v5{a,b,c...}                    |

#### 列表初始化vector对象

1. 使用拷贝初始化时（即使用=时），只能提供一个初始值
2. 如果提供的是一个类内初始值，只能使用`=`或`{}`
3. 如果提供的是初始元素值列表，只能放在花括号内`{}`

#### 值初始化

可提供vector对象容纳的元素数量，而不提供去初始值。此时库会创建一个**值初始化（value-initialized）**元素初值，并把它赋给容器内所有元素。

若使用花括号初始化，花括号内的元素无法与列表初始化配对，则会尝试其它方法解释花括号内的元素。



## 3.3.2 向vector对象中添加元素

**`push_back`**是vector的成员函数，用于向vector示例尾部添加元素。（压到尾部）

> 关键概念：vector对象能高效增长
>
> 为了使vector在运行时高效快速地添加元素，最好在定义vector时不要设定其大小。



## 3.3.3其他vector操作

| vector支持的操作        | 描述                                 |
| ------------------ | ---------------------------------- |
| v.empty()          | 如果v不含有任何元素，返回真；否则返回假               |
| v.size()           | 返回v中元素的个数                          |
| v.push_back(t)     | 向v的尾端添加一个值为t的元素                    |
| v[n]               | 返回v中第n个位置上元素的引用                    |
| v1 = v2            | 用v2种元素的拷贝替换v1中的元素                  |
| v1 = {a, b, c ...} | 用列表中元素的拷贝替换v1中的元素                  |
| v1 == v2           | v1 和 v2相等当且仅当它们的元素数量相同且对应位置的元素值都相同 |
| v1 != v2           |                                    |
| <, <=, >, >=       | 以字典顺序进行比较                          |

> 要使用vector的size_type，需要指定它是由哪种类型定义的。
>
> vector<int>::size_type;	//correct
>
> vector::size_type;		//error

只有当元素的值可比较时vector对象才能被比较。

#### 不能用下标形式添加元素

> 试图用下标访问不存在的元素将引发错误，不过这种错误不会被编译器发现，而是在运行时产生一个不可预知的值。
>
> 所谓的**缓冲区溢出（buffer overflow）** 指的就是这种错误。

